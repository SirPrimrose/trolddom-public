dialogue_screen .elysia_herbalism:
{
	text: 
	[	
		"If you pick up herbalism as a profession you'll be able to find and identify many different kinds of plants and herbs."
	]
	
	options:
	[
		{ goto: .elysia_greetings text: "I see." }
	]	
}

dialogue_screen .elysia_trainer:
{
	train_profession<0>: herbalism
	train_profession<1>: herbalism
}

dialogue_screen .elysia_greetings:
{
	text: 
	[	
		"What can I do for you?"
	]
	
	options:
	[
		{ quest: .elysia_1 }
		{ quest: .elysia_2 requirement self<must_have_discovered_zone>: { id: .zone_3 } }
		{ goto: .elysia_herbalism text: "Tell me about herbalism." }
		{ goto: .elysia_trainer text: "Teach me the way of the herbalist." }
	]
}

dialogue_root .elysia_dialogue:
{
	.elysia_greetings: { }
}

entity .elysia:
{
	string: "Elysia"
	
	systems: [ combat npc ]
	
	modifiers: 
	{ 
		weapon_damage: 2
		resource<health>: 2
	}		
	
	components:
	{
		position: { }		
		threat_target: { }
		visible_auras: { }
		auras: { }
		tag: { }
		guild_name:
		{
			string: "Herbalism Trainer"
		}
		lootable: 
		{ 
			loot_table: .npc
		}
		combat_public: 
		{  
			level: 10
			faction: npcs		
			creature_type: humanoid
			dialogue_root: .elysia_dialogue
			
			modifier not_pushable: {}
		}			
		combat_private:
		{
			physical_critical_strike_chance: 5
			dodge_chance: 5
			parry_chance: 5
			miss_chance: 5
			block_chance: 5
		}
		npc: 
		{ 			
			state default:
			{
			}
			
			state in_combat:
			{
				abilities:
				[					
					{ id: npc_attack }
				]
			}	
		}
		sprite: 
		{ 
			animations:
			[
				{ states: [ default in_combat spawning ] frames: [ woman_1 ] }			
				{ states: [ dead ] frames: [ woman_1_dead ] z_offset: -2 }			
			]		
		}		
	}
}

##########################################################################################
# Quest 1

objective .elysia_1:
{
	string: "Spongy Mushrooms"
	
	maps: [ open_world ]
	
	collect_items: { item: .elysia_quest_item count: 5 }
}

loot_group .elysia_quest_item: {}

item .elysia_quest_item:
{
	icon: icon_mushroom_1
	item_level: 4
	loot_groups: [ .elysia_quest_item ]
	flags: [ not_sellable ]
	string: "Spongy Mushroom"
	stack: 5
}

loot_table .elysia_quest_item:
{
	slots:
	[
		{
			possibility: { loot_group: .elysia_quest_item }			
		}		
	]
}

entity .elysia_quest_item:
{
	string: "Spongy Mushroom"
	systems: [ openable ]
	components:
	{
		position: { }		
		sprite: { animations: [ { states: [ default ] frames: [ mushroom_2 ] z_offset: -3 } ] }		

		openable: 
		{ 
			loot_table: .elysia_quest_item
			verb: pick
			range: 1 
			despawn: true 			
			required_quest: .elysia_1
		}		
	}
}

quest .elysia_1:
{
	string: "Rare Mushrooms"

	text:
	[
		"Venture into the dark woods to the east and collect mushrooms."
	]
	
	description: 
	[
		"Everyone loves mushrooms, right? Unfortunately I've run out and would love if you'd go into the woods to the east and collect some for me?"
	]

	progress:
	[
		"Any progress?"
	]
	
	completion:
	[
		"Nice."
	]

	objectives: [ .elysia_1 ]
	level: 4
	reward_one_item: [ consumable_small_healing_potion consumable_small_mana_potion ]
}

##########################################################################################
# Quest 2

objective .elysia_2:
{
	string: "Elderwood Mushrooms"
	
	maps: [ open_world ]
	
	collect_items: { item: .elysia_quest_item_2 count: 5 }
}

loot_group .elysia_quest_item_2: {}

item .elysia_quest_item_2:
{
	icon: icon_mushroom_2
	item_level: 5
	loot_groups: [ .elysia_quest_item ]
	flags: [ not_sellable ]
	string: "Elderwood Mushroom"
	stack: 5
}

loot_table .elysia_quest_item_2:
{
	slots:
	[
		{
			possibility: { loot_group: .elysia_quest_item_2 }			
		}		
	]
}

entity .elysia_quest_item_2:
{
	string: "Elderwood Mushroom"
	systems: [ openable ]
	components:
	{
		position: { }		
		sprite: { animations: [ { states: [ default ] frames: [ mushroom_2 ] z_offset: -3 } ] }		

		openable: 
		{ 
			loot_table: .elysia_quest_item_2
			verb: pick
			range: 1 
			despawn: true 			
			required_quest: .elysia_2
		}		
	}
}

quest .elysia_2:
{
	string: "Elderwood Mushrooms"

	text:
	[
		"Go back to the Eldertree Woods and collect mushrooms for Elysia."
	]
	
	description: 
	[
		"You recently went to the Eldertree Woods? Are you planning on going back any time soon? That place is home to some really spicy mushrooms that I'd love to"
		"get my hands on. Would you mind getting some for me if you get the chance?"
	]

	progress:
	[
		"Any progress?"
	]
	
	completion:
	[
		"Nice."
	]

	prerequisites: [ .elysia_1 ]
	objectives: [ .elysia_2 ]
	level: 5
	reward_one_item: [ consumable_small_healing_potion consumable_small_mana_potion ]
}



