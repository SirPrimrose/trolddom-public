loot_table test_world_npc_1:
{
	cash: [ 20 30 ]
	
	slots:
	[
		{
			possibility: { weight: 10 }
			possibility: { weight: 1 loot_group: world_drops_1_to_5 }
		}		
	]	
}

dialogue_screen test_world_npc_vendor:
{
	sell consumable_small_healing_potion: { quantity: 1 }	
	sell consumable_small_mana_potion: { quantity: 1 }	
}

dialogue_screen test_world_sylas:
{
	text: 
	[	
		"Greetings, $class$!\n"
		"\n"
		"What can I do for you?\n"
		"\n"
		"I have some exquisite items for sale that might interest you and if you possess anything you don't need I'll buy it from you"
		"at a, hmm, favorable price."
	]
	
	options:
	[
		{ goto: test_world_npc_vendor text: "Let me browse your goods." }
	]
}

dialogue_root test_world_sylas:
{
	test_world_sylas: { }
}

entity test_world_sylas:
{
	string: "Sylas"
	
	systems: [ combat npc ]
	
	components:
	{
		position: { }		
		threat_target: { }
		visible_auras: { }
		auras: { }
		tag: { }
		lootable : 
		{ 
			loot_table: test_world_npc_1
		}
		combat_public: 
		{  
			level: 1
			faction: npcs		
			dialogue_root: test_world_sylas
		}			
		combat_private:
		{
			weapon_damage_range: [ 6 12 ]
			physical_critical_strike_chance: 5
			dodge_chance: 5
			parry_chance: 5
			miss_chance: 5
			block_chance: 5
		}
		npc: 
		{ 			
			state default:
			{
			}
			
			state in_combat:
			{
				abilities:
				[					
					{ id: strike }
				]
			}
					
			resources:
			{
				health: 200
			}			
		}
		sprite: 
		{ 
			animations:
			[
				{ states: [ default in_combat spawning ] frames: [ man_1 ] }			
				{ states: [ dead ] frames: [ man_1_dead ] z_offset: -2 }			
			]		
		}		
	}
}

dialogue_screen test_world_rob_beaurichard_1:
{
	text: 
	[	
		"Welcome! I am Rob Beaurichard, the official guild registrar of this realm. If you have a burning desire to forge your own path and leave your mark on history,"
		"you've come to the right place. Would you like to create your very own guild and embark on epic adventures with like-minded individuals?"
	]
	
	options:
	[
		{ script: create_guild text: "Yes, please hand me the guild registration form." }
	]
}

dialogue_screen test_world_rob_beaurichard_2:
{
	text: 
	[	
		"If you don't feel at home in your guild, how about making your own? I've got the paperwork right here!"
	]
}

expression test_world_rob_beaurichard_is_in_guild:
{
	client_player_is_in_guild: {}
}

expression test_world_rob_beaurichard_is_not_in_guild:
{
	not: { client_player_is_in_guild: {} }
}

dialogue_root test_world_rob_beaurichard:
{
	test_world_rob_beaurichard_1: { conditions: [ test_world_rob_beaurichard_is_not_in_guild ] }
	test_world_rob_beaurichard_2: { conditions: [ test_world_rob_beaurichard_is_in_guild ] }
}

entity test_world_rob_beaurichard:
{
	string: "Rob Beaurichard"
	
	systems: [ combat npc ]
	
	components:
	{
		position: { }		
		threat_target: { }
		visible_auras: { }
		auras: { }
		tag: { }
		lootable : 
		{ 
			loot_table: test_world_npc_1
		}
		combat_public: 
		{  
			level: 1
			faction: npcs		
			dialogue_root: test_world_rob_beaurichard
		}			
		combat_private:
		{
			weapon_damage_range: [ 6 12 ]
			physical_critical_strike_chance: 5
			dodge_chance: 5
			parry_chance: 5
			miss_chance: 5
			block_chance: 5
		}
		npc: 
		{ 			
			state default:
			{
				dialogue_scripts: [ create_guild ]			
			}
			
			state in_combat:
			{
				abilities:
				[					
					{ id: strike }
				]
			}
					
			resources:
			{
				health: 200
			}			
		}
		sprite: 
		{ 
			animations:
			[
				{ states: [ default in_combat spawning ] frames: [ man_2 ] }			
				{ states: [ dead ] frames: [ man_2_dead ] z_offset: -2 }			
			]		
		}		
	}	
}
