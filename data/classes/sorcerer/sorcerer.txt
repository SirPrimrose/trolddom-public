ability sorcerer_attack:
{
	string: "Attack"
	description: "Deals $damage$ to target."
	flags: [ melee offensive attack target_other target_hostile can_be_dodged can_be_parried can_be_blocked can_miss use_weapon_icon ]	
	states: [ default in_combat ]
	delay: 3
	icon: icon_fist
	
	direct_effect damage:
	{
		flags: [ can_be_critical ]
		damage_type: physical			
		base: weapon
	}
	
	direct_effect modify_resource:
	{
		must_have_ability_modifier: charging_combat_1
		resource: mana
		target_self: true
		function: { expression: a_mul_x a: 0.03 x: mana_base }
	}
	
	direct_effect modify_resource:
	{
		must_have_ability_modifier: charging_combat_2
		resource: mana
		target_self: true
		function: { expression: a_mul_x a: 0.06 x: mana_base }
	}

	direct_effect modify_resource:
	{
		must_have_ability_modifier: charging_combat_3
		resource: mana
		target_self: true
		function: { expression: a_mul_x a: 0.09 x: mana_base }
	}	
}

class sorcerer:
{
	string: "Sorcerer"	
	description: "Master of magic."
	
	systems: [ combat health_regen mana_regen ]
	
	sprite: sorcerer
	sprite_dead: sorcerer_dead
	sprites_walk: [ sorcerer_walk_1 sorcerer_walk_2 ]
	
	color_1: [ 0 59 210 ] 
	color_2: [ 0 10 64 ]
	default_attack: sorcerer_attack
	default_action_bar: [ sorcerer_attack firebolt !DEFAULT_ABILITIES{} ]
	talent_trees: [ sorcerer_arcane sorcerer_elemental sorcerer_battle_mage ]

	item_types: [ armor_cloth weapon_1h_sword weapon_1h_knife weapon_2h_staff ]
	
	start_map open_world: [ ]
	start_equipment main_hand: weapon_gnarly_staff
	start_equipment chest: chest_tattered_robe
	start_equipment feet: feet_tattered_slippers
	start_equipment legs: legs_tattered_pants
	start_inventory: [ consumable_dry_bread consumable_dry_bread consumable_dry_bread consumable_dry_bread consumable_dry_bread ]

	stats_conversion:
	{
		str_to_dps: [ 2 5 ]
		str_weapon_damage_min: [ 2 3 ]
		str_weapon_damage_max: [ 4 3 ]		
		dex_to_phys_crit: [ 1 20 ]
		dex_to_dodge: [ 1 20 ]
		dex_to_parry: [ 1 25 ]
		str_to_parry: [ 1 40 ]
		wis_to_mag_crit: [ 1 30 ]
		con_to_health: [ 10 1 ]
		wis_to_mana: [ 10 1 ]
		spi_to_mana_regen_per_5_sec: [ 1 2 ]
		spi_to_health_regen: [ 1 1 ]		
		str_to_block_value: [ 1 20 ]
	}

	level_progression:
	[
		{
			level: 1
			
			unlock_abilities:
			[
				sorcerer_attack
				firebolt
				
				!DEFAULT_ABILITIES{}
			]
						
			stats:
			{
				dexterity: 2
				strength: 2
				wisdom: 6
				constitution: 4
				spirit: 6
			}
			
			resource health: { add_max: 60 }
			resource mana: { add_max: 60 }
			
			add_unarmed_weapon_damage: [ 2 4 ]			
		}
		
		{
			level: 2
			
			unlock_abilities:
			[			
				ice_lance
			]
			
			stats:
			{
				wisdom: 1
				constitution: 1
			}
			
			resource health: { add_max: 6 }
		}
		
		{
			level: 3
			
			unlock_abilities:
			[			
				power_shield
			]
			
			stats:
			{
				dexterity: 1
				strength: 1
				spirit: 1
			}			
			
			resource health: { add_max: 6 }
		}		
		
		{
			level: 4
			
			unlock_abilities:
			[
				fireball
			]
			
			stats:
			{
				wisdom: 1
				constitution: 1
			}			
			
			resource health: { add_max: 6 }			
		}				
		
		{
			level: 5
			
			unlock_abilities:
			[
				arcane_missile				
			]
			
			stats:
			{
				dexterity: 1
				strength: 1
				spirit: 1
			}			
			
			resource health: { add_max: 6 }
		}		
		
		{
			level: 6
			
			unlock_abilities:
			[
				frost_explosion
			]
			
			stats:
			{
				wisdom: 1
				constitution: 1
			}			
			
			resource health: { add_max: 6 }			
		}				

		{
			level: 7
			
			unlock_abilities:
			[			
				sleep
			]
			
			stats:
			{
				dexterity: 1
				strength: 1
				spirit: 1
			}	

			resource health: { add_max: 6 }
		}		
		
		{
			level: 8
			
			unlock_abilities:
			[
				counterspell
			]
			
			stats:
			{
				wisdom: 1
				constitution: 1
			}			
			
			resource health: { add_max: 6 }			
		}				

		{
			level: 9
			
			unlock_abilities:
			[
			]
			
			stats:
			{
				dexterity: 1
				strength: 1
				spirit: 1
			}			
			
			resource health: { add_max: 6 }			
		}		
		
		{
			level: 10
			
			unlock_abilities:
			[			
			]
			
			stats:
			{
				wisdom: 1
				constitution: 1
			}			
			
			resource health: { add_max: 6 }			
		}				
		
	]
}
